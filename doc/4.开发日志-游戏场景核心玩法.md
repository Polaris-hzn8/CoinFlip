# 开发日志-游戏场景核心玩法

---

### 1.加载金币的背景

#### gamescene

在游戏场景中添加金币的背景，

```cpp
for (int i = 0; i < 4; ++i) {
    for (int j = 0; j < 4; ++j) {
        QPixmap pixmap = QPixmap(":/res/img/BoardNode.png");
        QLabel *label = new QLabel(this);
        label->setGeometry(0, 0, pixmap.width(), pixmap.height());
        label->setPixmap(pixmap);
        label->move(60 + i*50, 200 + j*50);
    }
}
```

### 2.加载金币

金币是游戏的核心，并且在游戏中可以利用二维数组进行维护，拥有支持点击、反转特效等特殊属性，应该<font color='#BAOC2F'>创建金币类</font>满足需求，

#### coin

```cpp
class Coin : public QPushButton {
    Q_OBJECT
public:
    //explicit Coin(QWidget *parent = nullptr);
    Coin(QWidget *parent = nullptr, QString img = "");
signals:
public slots:
};
```

```cpp
Coin::Coin(QWidget *parent, QString img) {
    setParent(parent);
    QPixmap pixmap;
    if (!pixmap.load(img)) {
        qDebug() << "debug: coin image load failed." << img;
        return;
    }
    setFixedSize(pixmap.width(), pixmap.height());
    setStyleSheet("QPushButton{border:0px;}");
    setIcon(pixmap);
    setIconSize(QSize(pixmap.width(), pixmap.height()));
}
```

#### gamescene

```cpp
//4.加载核心游戏内容
//4-1.加载金币的背景
for (int i = 0; i < 4; ++i) {
    for (int j = 0; j < 4; ++j) {
        QPixmap pixmap = QPixmap(":/res/img/BoardNode.png").scaledToWidth(60);
        QLabel *label = new QLabel(this);
        label->setGeometry(0, 0, pixmap.width(), pixmap.height());
        label->setPixmap(pixmap);
        label->move(75 + i*60, 200 + j*60);
        //4-2.在每个金币的背景中创建金币
        Coin *coin = new Coin(this, ":/res/img/Coin0001.png");
        coin->move(75 + i*60 + pixmap.width()*0.1, 200 + j*60 + pixmap.height()*0.1);
    }
}
```





